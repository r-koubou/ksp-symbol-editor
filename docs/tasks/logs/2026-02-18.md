# 2026-02-18 作業ログ

## 作業内容

変数シンボルエディタ (`apps/variables/`) を新規作成した。

### 作成ファイル

- `apps/variables/index.html`
- `apps/variables/style.css`
- `apps/variables/app.js`

### 実装した機能

- YAML 読み込み（独自パーサー、CDN 不使用）
- YAML エクスポート（独自シリアライザー）
- シンボルリスト表示・検索フィルタリング
- シンボル選択・編集フォーム（Save / Delete ボタン）
- +New Symbol（UUID 自動生成）
- Bulk Import モーダル（1行1変数名、Description に `Built-in Variable: <名前>` を自動設定）
- フォームバリデーション（Name / BuiltIntoVersion の必須チェック、エラーボーダー＋エラーメッセージ表示）
- CRUD 操作時のトースト通知（右からスライドインアニメーション）
- レスポンシブレイアウト

### 仕様対応の要点

- `Description` 空: `Description: ""`、1文字以上: `Description: |-` (コンテンツは2スペース追加インデント)
- YAML 文字列クォート: 必要な場合のみ `'` で囲む（`needsQuoting()` 関数で判定）
- シンボル切り替え時にバリデーションエラー状態をリセット

## 完了タスク

- [x] HTML/CSS の実装
- [x] YAMLデータの読みこみ、エクスポート機能の実装
- [x] 検索ボックスの実装
- [x] フォームのバリデーションの実装
- [x] CRUD 操作時の通知表示の実装

---

## 作業内容（2）

コマンドシンボルエディタ (`apps/commands/`) を新規作成した。
その後、実YAMLファイルとの差分検証でバグを発見・修正した。

### 作成ファイル

- `apps/commands/index.html`
- `apps/commands/style.css`
- `apps/commands/app.js`

### 実装した機能

- YAML 読み込み（独自パーサー、Arguments のネスト構造に対応）
- YAML エクスポート（独自シリアライザー）
- シンボルリスト表示・検索フィルタリング
- シンボル選択・編集フォーム（Name / Id / BuiltIn / BuiltIntoVersion / Description）
- Return Type: テキスト入力 + Quick Selection チェックボックス（双方向同期）
- Arguments テーブル: 一覧表示 + Edit / Delete ボタン
- 引数編集モーダル（Argument Name / DataType / Description）
- DataType: テキスト入力 + Quick Selection チェックボックス（モーダル内）
- +New Symbol（UUID 自動生成、ReturnType=V, Arguments=[]）
- Bulk Import モーダル
- フォームバリデーション（Name / BuiltIntoVersion / ReturnType の必須チェック）
- CRUD 操作時のトースト通知

### バグ修正（`apps/commands/app.js` および `apps/variables/app.js` 共通）

1. **`|-` ブロックリテラル内の空行に余分なスペース**
   - `serializeDescription()` で空行にインデントスペースが付いていた
   - `line === ''` の場合は `'\n'` のみ出力するよう修正

2. **YAML 1.1 boolean `y` / `Y` / `n` / `N` が未クォート**
   - `needsQuoting()` の判定正規表現を拡張
   - YamlDotNet (C#) が YAML 1.1 で `y`/`Y`/`n`/`N` を boolean として扱うため要クォート

## 完了タスク

- [x] HTML/CSS の実装
- [x] YAMLデータの読みこみ、エクスポート機能の実装
- [x] 検索ボックスの実装
- [x] フォームのバリデーションの実装
- [x] CRUD 操作時の通知表示の実装
